<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="Content-Security-Policy" content="script-src 'self'; object-src 'none';">
  <title>JobHunter Real Application Test</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      margin: 20px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      color: #333;
    }
    .container {
      max-width: 1000px;
      margin: 0 auto;
      background: white;
      padding: 30px;
      border-radius: 12px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.1);
    }
    .header {
      text-align: center;
      margin-bottom: 30px;
    }
    .header h1 {
      color: #4a5568;
      margin-bottom: 10px;
    }
    .status-card {
      background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
      padding: 20px;
      border-radius: 10px;
      color: white;
      margin-bottom: 20px;
      text-align: center;
    }
    .test-section {
      margin: 30px 0;
      padding: 20px;
      border: 2px solid #e2e8f0;
      border-radius: 10px;
    }
    .test-section h3 {
      color: #4a5568;
      margin-bottom: 15px;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .test-btn {
      background: #667eea;
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 14px;
      margin: 5px;
      transition: background 0.3s;
      font-weight: 600;
    }
    .test-btn:hover { background: #5a6fd8; }
    .test-btn.success { background: #48bb78; }
    .test-btn.warning { background: #ed8936; }
    .test-btn.danger { background: #f56565; }
    
    .results {
      margin-top: 20px;
      padding: 20px;
      background: #f7fafc;
      border-radius: 8px;
      font-family: monospace;
      font-size: 12px;
      max-height: 300px;
      overflow-y: auto;
      white-space: pre-wrap;
    }
    
    .instructions {
      background: #ebf8ff;
      border: 1px solid #90cdf4;
      border-radius: 8px;
      padding: 20px;
      margin: 20px 0;
      color: #2c5282;
    }
    
    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
      margin: 20px 0;
    }
    
    .metric-card {
      background: #f7fafc;
      padding: 15px;
      border-radius: 8px;
      text-align: center;
      border-left: 4px solid #4299e1;
    }
    
    .metric-number {
      font-size: 24px;
      font-weight: bold;
      color: #2d3748;
      margin-bottom: 5px;
    }
    
    .metric-label {
      font-size: 12px;
      color: #718096;
    }
    
    .log-entry {
      padding: 8px 12px;
      margin: 5px 0;
      border-radius: 4px;
      font-size: 13px;
    }
    
    .log-success { background: #c6f6d5; color: #22543d; }
    .log-error { background: #fed7d7; color: #c53030; }
    .log-info { background: #bee3f8; color: #2b6cb0; }
    
    .platform-indicator {
      display: inline-block;
      padding: 4px 8px;
      border-radius: 12px;
      font-size: 10px;
      font-weight: bold;
      text-transform: uppercase;
      margin-left: 10px;
    }
    
    .linkedin { background: #0077b5; color: white; }
    .indeed { background: #2557a7; color: white; }
    .ziprecruiter { background: #1b7ba8; color: white; }
    .glassdoor { background: #0caa41; color: white; }

    .job-table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
    }
    
    .job-table th,
    .job-table td {
      padding: 12px;
      text-align: left;
      border-bottom: 1px solid #e2e8f0;
    }
    
    .job-table th {
      background-color: #f7fafc;
      font-weight: 600;
      color: #4a5568;
    }
    
    .job-table tr:hover {
      background-color: #f7fafc;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>üéØ JobHunter Real Application Testing</h1>
      <p>Verify your extension is capturing real job applications</p>
    </div>

    <div class="status-card">
      <h3>Current Status</h3>
      <div id="statusDisplay">Initializing...</div>
    </div>

    <div class="instructions">
      <h4>üöÄ How to Test Real Applications:</h4>
      <ol>
        <li><strong>Open a job site</strong> in a new tab (LinkedIn, Indeed, ZipRecruiter, or Glassdoor)</li>
        <li><strong>Navigate to a job listing</strong> you're interested in</li>
        <li><strong>Apply manually</strong> using the site's apply button (not auto-apply)</li>
        <li><strong>Return here</strong> and click "Check for Real Applications" to verify capture</li>
        <li><strong>Or use the Auto Mode</strong> to let the extension apply automatically</li>
      </ol>
    </div>

    <div class="test-section">
      <h3>üìä Real Application Metrics</h3>
      <div class="grid">
        <div class="metric-card">
          <div class="metric-number" id="totalRealApps">0</div>
          <div class="metric-label">Total Real Applications</div>
        </div>
        <div class="metric-card">
          <div class="metric-number" id="todayRealApps">0</div>
          <div class="metric-label">Today's Real Applications</div>
        </div>
        <div class="metric-card">
          <div class="metric-number" id="autoAppliedJobs">0</div>
          <div class="metric-label">Auto-Applied Jobs</div>
        </div>
        <div class="metric-card">
          <div class="metric-number" id="successRate">0%</div>
          <div class="metric-label">Capture Success Rate</div>
        </div>
      </div>
    </div>

    <div class="test-section">
      <h3>üîç Real Application Detection</h3>
      <button class="test-btn success" id="checkRealAppsBtn">Check for Real Applications</button>
      <button class="test-btn" id="enableAutoModeBtn">Enable Auto Apply Mode</button>
      <button class="test-btn warning" id="testJobDetectionBtn">Test Job Page Detection</button>
      <button class="test-btn danger" id="clearRealDataBtn">Clear Real Data Only</button>
      <div class="results" id="realAppResults">Click "Check for Real Applications" to start...</div>
    </div>

    <div class="test-section">
      <h3>üéÆ Manual Testing Controls</h3>
      <button class="test-btn" id="simulateLinkedInBtn">Simulate LinkedIn Application</button>
      <button class="test-btn" id="simulateIndeedBtn">Simulate Indeed Application</button>
      <button class="test-btn" id="injectTestJobBtn">Inject Test Job Data</button>
      <button class="test-btn warning" id="testFiltersBtn">Test Smart Filters</button>
      <div class="results" id="manualTestResults">Manual test results will appear here...</div>
    </div>

    <div class="test-section">
      <h3>üìã Recent Real Applications</h3>
      <div id="recentApplicationsList">
        <div style="text-align: center; color: #718096; padding: 20px;">
          No real applications detected yet
        </div>
      </div>
      
      <table class="job-table" id="jobsTable" style="display: none;">
        <thead>
          <tr>
            <th>Date</th>
            <th>Job Title</th>
            <th>Company</th>
            <th>Platform</th>
            <th>Status</th>
            <th>Match Score</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody id="jobsTableBody">
        </tbody>
      </table>
    </div>

    <div class="test-section">
      <h3>üìù Activity Log</h3>
      <div id="activityLog" class="results" style="max-height: 200px;">
        <div class="log-entry log-info">System initialized - Ready for testing</div>
      </div>
    </div>
  </div>

  <!-- External script files to comply with CSP -->
  <script src="dashboard-fixed.js"></script>
</body>
</html>